<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<HTML>
  <HEAD>
    <TITLE>Compilation and deployment instruction</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  </HEAD>
  <BODY>
    <H1>Compilation and deployment instruction</H1>
    <P ALIGN="justify">All <code>XFoo</code> Java interfaces are generated from IDL files with the same
    name. As long as <code>XFoo</code> Java/IDL interfaces are not modified, there is no need for the
    OpenOffice SDK. But if any <code>XFoo</code> interface is modified, then steps 1 to 4 below must
    be done. Step 5 shall be executed on the client machine (users can also use the
    "<CITE>Tools / Package manager</CITE>" menu from OpenOffice GUI).</P>

    <TABLE><TR VALIGN="top"><TD>
      <TABLE><TR><TD>
        <TABLE BORDER='1' CELLPADDING='0' CELLSPACING='0'>
          <TR BGCOLOR="lightblue"><TH>Tool</TH>           <TH NOWRAP>Provided with</TH></TR>
          <TR><TD><CODE>&nbsp;idlc&nbsp;</CODE></TD>      <TD NOWRAP>&nbsp;OpenOffice SDK&nbsp;</TD></TR>
          <TR><TD><CODE>&nbsp;regmerge&nbsp;</CODE></TD>  <TD NOWRAP>&nbsp;OpenOffice SDK&nbsp;</TD></TR>
          <TR><TD><CODE>&nbsp;javamaker&nbsp;</CODE></TD> <TD NOWRAP>&nbsp;OpenOffice SDK&nbsp;</TD></TR>
          <TR><TD><CODE>&nbsp;javap&nbsp;</CODE></TD>     <TD NOWRAP>&nbsp;Java SDK&nbsp;</TD></TR>
          <TR><TD><CODE>&nbsp;javac&nbsp;</CODE></TD>     <TD NOWRAP>&nbsp;Java SDK&nbsp;</TD></TR>
          <TR><TD><CODE>&nbsp;jar&nbsp;</CODE></TD>       <TD NOWRAP>&nbsp;Java SDK&nbsp;</TD></TR>
          <TR><TD><CODE>&nbsp;zip&nbsp;</CODE></TD>       <TD NOWRAP>&nbsp;Unix distribution&nbsp;</TD></TR>
          <TR><TD><CODE>&nbsp;unopkg&nbsp;</CODE></TD>    <TD NOWRAP>&nbsp;OpenOffice suite&nbsp;</TD></TR>
        </TABLE>
        </TD></TR><TR><TD>
        <P>&nbsp;</P>
        <TABLE>
          <TR><TH>Required OOo JARs</TH></TR>
          <TR><TD><CODE>ridl.jar</CODE></TD></TR>
          <TR><TD><CODE>unoil.jar</CODE></TD></TR>
          <TR><TD><CODE>jurt.jar</CODE></TD></TR>
          <TR><TD><CODE>juh.jar</CODE></TD></TR>
        </TABLE>
      </TABLE>
      </TD><TD><OL>
        <LI><P>Compiles the UNO <code>.urd</code> binary file</P>
        <BLOCKQUOTE>
<PRE>cd modules/analytics/geotk-openoffice/src/main/java
idlc -C -cid -w -I $OO_SDK_HOME/idl org/geotoolkit/openoffice/*.idl</PRE>
        </BLOCKQUOTE></LI>

        <LI><P>Compiles the UNO <code>.rdb</code> registry file</P>
        <BLOCKQUOTE>
<PRE>regmerge ../unopkg/geotk.rdb /UCR org/geotoolkit/openoffice/*.urd
rm org/geotoolkit/openoffice/*.urd
cd ../unopkg</PRE>
        </BLOCKQUOTE></LI>

        <LI><P>Creates the <code>.class</code> file for Java interfaces</P>
        <BLOCKQUOTE>
<PRE>javamaker -BUCR -nD geotk.rdb $OFFICE_BASE_HOME/ure-link/share/misc/types.rdb \
  -Torg.geotoolkit.openoffice.XNature \
  -Torg.geotoolkit.openoffice.XReferencing</PRE>
        </BLOCKQUOTE></LI>

        <LI><P>Derives a <code>.java</code> source from the <code>.class</code> file</P>
        <BLOCKQUOTE>
<PRE>javap org.geotoolkit.openoffice.XNature org.geotoolkit.openoffice.XReferencing</PRE>
        </BLOCKQUOTE></LI>

        <HR>

        <LI><P>Build</P>
        <BLOCKQUOTE>
<PRE>mvn install</PRE>
        </BLOCKQUOTE></LI>

        <HR>

        <LI><P>Register the component to OpenOffice</P>
        <BLOCKQUOTE>
<PRE>unopkg add geotk-SNAPSHOT.oxt</PRE>
        </BLOCKQUOTE></LI>
      </OL></TD></TR>
    </TABLE>
  </BODY>
</HTML>
