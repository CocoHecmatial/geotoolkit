<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE book [
  <!ENTITY % book.entities SYSTEM "../../book.entities">
  %book.entities;
]>
<section xmlns="http://docbook.org/ns/docbook" version="5.0"
         xmlns:xlink = "http://www.w3.org/1999/xlink">
          
    <title>
        Process registry
    </title>
    
    <section>
        <title>Qu'est-ce ?</title>
        <para>
            Les registry ou factory sont utilisés dans le module processing de Geotoolkit pour organiser les processus réalisant le même type de traitement. Par exemple, la registry "math" contient uniquement des processus de calcul, la registry vector des processus travaillant sur des couches vectorielles ... etc. 
        </para>
        <para>
            Chaque registry contient donc une liste d'instance de description des processus qu'elle contient. On peut ainsi récupérer le descriptif des entrées/sorties d'un process précis facilement. 
        </para>
        
    </section>
        
    <section>
        <title>Récupération des registry et des descriptions des processus.</title>
            
        <example>
            <title>Code source complet  : </title>
            <link xlink:href="http://hg.geotoolkit.org/geotoolkit-pending/file/tip/demos/geotk-demo-samples/src/main/java/org/geotoolkit/pending/demo/processing/FindProcessDemo.java">
                <acronym>geotoolkit-pending/demos/geotk-demo-samples/src/main/java/org/geotoolkit/pending/demo/processing/FindProcessDemo.java</acronym>
            </link>        
        </example>
        <para>
            Pour récupérer la liste des Registry de processus, il faut utiliser la methode getProcessFactories de la classe utilitaire ProcessFinder.    
        </para>
        <example>
            <title>Liste des registry / factory</title>
            <programlisting>
                
                    //Itérateur sur la liste des registry de processus.
                    final Iterator&lt;ProcessingRegistry&gt; registryIter = ProcessFinder.getProcessFactories();
 
                    //Parcours de la liste.
                    while (registryIter.hasNext()) {
                    final ProcessingRegistry registry = registryIter.next(); 
                    }
                
            </programlisting>
        </example>
        
        <para>
            Si l'on connait le nom du registry on peut également le récupérer directement sans passer par la liste des registry. 
        </para>
        
        <example>
            <title>Registry seul</title>
            <programlisting>
                
                    //Récupération de la registry math.
                    final ProcessingRegistry registry = ProcessFinder.getProcessFactory("math");
                
            </programlisting>
        </example>
        
        <para>
            Une fois que l'on a une registry on peut appeler différentes méthodes dessus :
        </para>
        
        <example>
            <title>Registry méthodes</title>
            <programlisting>
                
                    //Récupération du nom de la registry.
                    final String registryName = registry.getIdentification().getCitation().getTitle().toString();
 
                    //Récupération de la liste des descriptions des process.
                    final List&lt;ProcessDescriptor&gt; descriptorList = registry.getDescriptors();  
 
                    //Récupération des noms des process de la registery seulement.
                    final List&lt;String&gt; processNameList = registry.getNames();    
 
                    //Récupération de la description d'un process en particulier. 
                    final ProcessDescriptor cosProcessDescriptor = registry.getDescriptor("cos");
                
            </programlisting>
        </example>
        
    </section>
    
</section>